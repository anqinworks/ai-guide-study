<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TabBar 图标生成器</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        .icon-item {
            text-align: center;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        canvas {
            border: 1px solid #ddd;
            margin: 10px 0;
            cursor: pointer;
        }
        button {
            background: #FF7A45;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #FF5722;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TabBar 图标生成器</h1>
        <p>点击"下载"按钮保存图标到 <code>miniprogram/images/tabbar/</code> 目录</p>
        
        <div class="icon-grid">
            <div class="icon-item">
                <h3>首页 - 未选中</h3>
                <canvas id="home" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('home', '#999999')">下载 home.png</button>
            </div>
            <div class="icon-item">
                <h3>首页 - 选中</h3>
                <canvas id="home-active" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('home-active', '#FF7A45')">下载 home-active.png</button>
            </div>
            <div class="icon-item">
                <h3>答题记录 - 未选中</h3>
                <canvas id="record" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('record', '#999999')">下载 record.png</button>
            </div>
            <div class="icon-item">
                <h3>答题记录 - 选中</h3>
                <canvas id="record-active" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('record-active', '#FF7A45')">下载 record-active.png</button>
            </div>
            <div class="icon-item">
                <h3>统计 - 未选中</h3>
                <canvas id="statistics" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('statistics', '#999999')">下载 statistics.png</button>
            </div>
            <div class="icon-item">
                <h3>统计 - 选中</h3>
                <canvas id="statistics-active" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('statistics-active', '#FF7A45')">下载 statistics-active.png</button>
            </div>
            <div class="icon-item">
                <h3>我的 - 未选中</h3>
                <canvas id="user" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('user', '#999999')">下载 user.png</button>
            </div>
            <div class="icon-item">
                <h3>我的 - 选中</h3>
                <canvas id="user-active" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('user-active', '#FF7A45')">下载 user-active.png</button>
            </div>
        </div>
        
        <div class="instructions">
            <h3>使用说明：</h3>
            <ol>
                <li>点击每个图标下方的"下载"按钮</li>
                <li>将下载的PNG文件保存到 <code>miniprogram/images/tabbar/</code> 目录</li>
                <li>确保文件名与按钮上的名称完全一致</li>
                <li>在 <code>app.json</code> 中已配置好图标路径，保存文件后重新编译即可</li>
            </ol>
        </div>
    </div>

    <script>
        // 图标绘制函数
        function drawIcon(canvasId, iconType, color) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            // 清空画布
            ctx.clearRect(0, 0, 81, 81);
            
            // 设置样式
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            const centerX = 40.5;
            const centerY = 40.5;
            
            switch(iconType) {
                case 'home':
                    // 绘制房子图标
                    ctx.beginPath();
                    // 屋顶
                    ctx.moveTo(centerX, 15);
                    ctx.lineTo(25, 30);
                    ctx.lineTo(56, 30);
                    ctx.closePath();
                    ctx.stroke();
                    // 房子主体
                    ctx.strokeRect(28, 30, 25, 25);
                    // 门
                    ctx.fillRect(38, 45, 8, 10);
                    break;
                    
                case 'record':
                    // 绘制列表图标
                    ctx.beginPath();
                    // 列表项1
                    ctx.moveTo(20, 25);
                    ctx.lineTo(61, 25);
                    // 列表项2
                    ctx.moveTo(20, 40.5);
                    ctx.lineTo(61, 40.5);
                    // 列表项3
                    ctx.moveTo(20, 56);
                    ctx.lineTo(61, 56);
                    // 圆点
                    ctx.arc(28, 25, 3, 0, Math.PI * 2);
                    ctx.arc(28, 40.5, 3, 0, Math.PI * 2);
                    ctx.arc(28, 56, 3, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.stroke();
                    break;
                    
                case 'statistics':
                    // 绘制图表图标
                    ctx.beginPath();
                    // 坐标轴
                    ctx.moveTo(20, 60);
                    ctx.lineTo(20, 20);
                    ctx.lineTo(61, 20);
                    // 柱状图
                    ctx.fillRect(25, 50, 8, 10);
                    ctx.fillRect(36, 40, 8, 20);
                    ctx.fillRect(47, 30, 8, 30);
                    ctx.fillRect(58, 35, 8, 25);
                    ctx.stroke();
                    break;
                    
                case 'user':
                    // 绘制用户图标
                    ctx.beginPath();
                    // 头部（圆形）
                    ctx.arc(centerX, 28, 10, 0, Math.PI * 2);
                    ctx.stroke();
                    // 身体（半圆）
                    ctx.arc(centerX, 28, 18, 0, Math.PI, true);
                    ctx.stroke();
                    break;
            }
        }
        
        // 初始化所有图标
        function initIcons() {
            drawIcon('home', 'home', '#999999');
            drawIcon('home-active', 'home', '#FF7A45');
            drawIcon('record', 'record', '#999999');
            drawIcon('record-active', 'record', '#FF7A45');
            drawIcon('statistics', 'statistics', '#999999');
            drawIcon('statistics-active', 'statistics', '#FF7A45');
            drawIcon('user', 'user', '#999999');
            drawIcon('user-active', 'user', '#FF7A45');
        }
        
        // 下载图标
        function downloadIcon(canvasId, color) {
            const canvas = document.getElementById(canvasId);
            const iconType = canvasId.replace('-active', '');
            
            // 重新绘制以确保颜色正确
            drawIcon(canvasId, iconType, color);
            
            // 转换为Blob并下载
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = canvasId + '.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 'image/png');
        }
        
        // 页面加载时初始化
        window.onload = initIcons;
    </script>
</body>
</html>

