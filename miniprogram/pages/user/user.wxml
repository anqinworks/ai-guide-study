<!-- pages/user/user.wxml -->
<view class="container">
  <!-- ç™»å½•è¡¨å• -->
  <view class="login-section" wx:if="{{!isLoggedIn}}">
    <text class="login-title">ç™»å½•</text>
    
    <!-- å¾®ä¿¡æˆæƒç™»å½•æŒ‰é’® -->
    <button class="wx-login-btn" bindtap="wxLogin" disabled="{{loginBtnDisabled}}">
      <text class="wx-login-icon">ğŸ“±</text>
      <text class="wx-login-text">{{loginBtnDisabled ? 'ç™»å½•ä¸­...' : 'å¾®ä¿¡æˆæƒç™»å½•'}}</text>
    </button>
  </view>
  
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-info-section" wx:if="{{isLoggedIn}}">
    <image src="{{userInfo.avatar || 'https://picsum.photos/200/200'}}" class="avatar"></image>
    <text class="nickname">{{userInfo.nickname || 'ç”¨æˆ·'}}</text>
    <text class="user-id">ID: {{userInfo.id || ''}}</text>
  </view>
  
  <!-- æ¯æ—¥ç­¾åˆ°å¡ç‰‡ -->
  <view class="checkin-section" wx:if="{{isLoggedIn}}">
    <view class="checkin-card">
      <view class="checkin-header">
        <text class="checkin-title">æ¯æ—¥ç­¾åˆ°</text>
        <text class="checkin-subtitle">åšæŒç­¾åˆ°ï¼Œæ”¶è·æ»¡æ»¡</text>
      </view>
      
      <view class="checkin-content">
        <view class="checkin-stats">
          <view class="checkin-stat-item">
            <text class="checkin-stat-value">{{checkinData.continuousDays || 0}}</text>
            <text class="checkin-stat-label">è¿ç»­ç­¾åˆ°</text>
          </view>
          <view class="checkin-stat-item">
            <text class="checkin-stat-value">{{checkinData.totalDays || 0}}</text>
            <text class="checkin-stat-label">ç´¯è®¡ç­¾åˆ°</text>
          </view>
        </view>
        
        <button 
          class="checkin-btn {{checkinData.isCheckedToday ? 'checked' : ''}}" 
          bindtap="handleCheckin"
          disabled="{{checkinData.isCheckedToday}}">
          <text class="checkin-btn-icon" wx:if="{{!checkinData.isCheckedToday}}">âœ¨</text>
          <text class="checkin-btn-text">{{checkinData.isCheckedToday ? 'ä»Šæ—¥å·²ç­¾åˆ°' : 'ç«‹å³ç­¾åˆ°'}}</text>
        </button>
        
        <view class="checkin-tips" wx:if="{{checkinData.todayReward}}">
          <text class="checkin-tips-icon">ğŸ</text>
          <text class="checkin-tips-text">ä»Šæ—¥å¥–åŠ±ï¼š{{checkinData.todayReward}}</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section" wx:if="{{isLoggedIn}}">
    <view class="menu-item" bindtap="logout">
      <text class="menu-icon">ğŸšª</text>
      <text class="menu-text">é€€å‡ºç™»å½•</text>
      <text class="menu-arrow">></text>
    </view>
  </view>
</view>